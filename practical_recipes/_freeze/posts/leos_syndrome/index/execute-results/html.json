{
  "hash": "6369e01c7bc88e724f951d2014ec804b",
  "result": {
    "markdown": "---\ntitle: \"Leo's Syndrome with Julia Makie\"\ndate: \"2022-11-02\"\ncategories:\n  - julia\n  - visualization\n  - makie\nimage: \"leo.png\"\n---\n\nÏù¥ Í∏ÄÏùÄ [Leo's Syndrome](https://beautiful.makie.org/dev/examples/generated/2d/datavis/leos/)ÏùÑ Í∏∞Î∞òÏúºÎ°ú ÏûëÏÑ±ÌïòÏòÄÏäµÎãàÎã§.\n\n![Leo's Syndrome](leo.png)\n\n::: {.cell execution_count=1}\n``` {.julia .cell-code}\nusing Downloads, GLMakie\nusing Colors, Statistics\nusing FileIO\n\nGLMakie.activate!()\n# some data\nnames = [\"Leonardo Dicaprio\", \"Gisele Bundchen\", \"Bar Refaeli\",\n        \"Blake Lively\", \"Erin Heatherton\", \"Toni Garrn\", \"Kelly Rohrbach\",\n        \"Nina Agdal\", \"Camila Morrone\"]\nnamesfiles = join.(split.(lowercase.(names)), \"_\")\n\ny_xticks = 1998:2022\nys_xticks = string.(1998:2022)\nyd_xticks = [\"'\"*t[3:4] for t in ys_xticks]\nage_leo = 24 .+ collect(1:length(y_xticks)) .- 1\n\nage_gf = [18:23, 20:25, 23, 22, 20:21,25, 24:25, 20:25]\nyears = [1998:2003, 2004:2009, 2010, 2011, 2012:2013, 2014,\n    2015:2016, 2017:2022]\n# helper functions\n# Inspired by https://github.com/tashapiro/tanya-data-viz/tree/main/dicaprio-gfs\nfunction getPicture(; name = \"leonardo_dicaprio\",\n        imgs_link = \"https://raw.githubusercontent.com/tashapiro/tanya-data-viz/main/dicaprio-gfs/images/\")\n    load(Downloads.download(joinpath(imgs_link, name * \".png\")))\nend\nfunction poly3(t, p0, p1, p2, p3)\n    Point2f((1-t)^3 .* p0 .+ t*p1*(3*(1-t)^2) + p2*(3*(1-t)*t^2) .+ p3*t^3)\nend\nfunction BezierPath(o, f, co, cf; t = range(0,1, length=30))\n    return [poly3(t, o, co, cf, f) for t in t]\nend\nfunction posFig(ax, x; yoff=100, ylow = 15)\n    o = ax.scene.px_area[].origin - Point2f(0, yoff)\n    return Makie.project(ax.scene, Point2f(x, ylow)) + o\nend\nfunction supLine(p1, p2; x=0,y=8)\n    [p1 .+ Point2f(x,y), p1, p2, p2 .+ Point2f(x,y)]\nend\n\npictures = [getPicture(; name = n) for n in namesfiles]\ncmap = resample_cmap(Reverse(:Hiroshige), 9)\nblue = colorant\"#6EE2FFFF\";\ngrey = colorant\"#D0DFE699\";\n# Œ±colors = [blue, grey, (grey, 0.1), (blue,0.65)] # try this one üòÑ\nŒ±colors = [blue, blue, (grey, 0.0), (grey,0.0)]\nŒ±colorsLeg = [blue, (grey, 0.0), (grey,0.0), blue]\n\nlegleo = MarkerElement(color =1.2cmap[2:3:end], marker = :circle, markersize = 20,\n        points = Point2f[(0, 0.5), (1, 0.5), (2, 0.5)])\nleggirl = PolyElement(color = Œ±colorsLeg, strokecolor = :white, strokewidth = 0.85,\n    points = Point2f[(-0.2, 0), (2.2, 0), (2.2,1), (-0.2, 1)])\n\nwith_theme(theme_black()) do\n    fig = Figure(; resolution = (1200,800))\n    ax = Axis(fig[1,1:9], ylabel = \"Age [Years]\", xlabel = \"\")\n    lines!(ax, y_xticks, age_leo; label = \"Leo's age\", color = age_leo,\n        linestyle = :dot, colormap = 1.2cmap[2:end])\n    scatter!(ax, y_xticks, age_leo; label = \"Leo's age\", color = age_leo,\n        markersize = 10, colormap = 1.2cmap[2:end])\n    [barplot!.(years[i], age_gf[i]; color = Œ±colors,label = \"Girlfriend's age\",\n        strokewidth=0.85, strokecolor= (:white,1)) for i in eachindex(years)]\n    [scatter!(ax, [2009,2014, 2016, 2022], fill(25 +1,4);\n        color = (blue, 0.1), markersize = 50-3i) for i in 1:10]\n    lines!(ax,supLine(Point2f(2009,29), Point2f(2022,29); x=0,y=-3); color=blue)\n    lines!(ax,supLine(Point2f(2014,29), Point2f(2016,29); x=0,y=-3); color=blue)\n    text!(ax, \"Threshold\", position = (2014,30))\n    [text!(string.(age_gf[i]), position = Point2f.(years[i], age_gf[i] .+0.5),\n        align = (:center, :bottom), fontsize = 16) for i in eachindex(age_gf)]\n    text!(string.(age_leo), position = Point2f.(y_xticks, age_leo .+0.5),\n        align = (:center, :bottom), fontsize = 16)\n    ax.xticks = (y_xticks, yd_xticks)\n    ax.yticks = 0:5:55\n    ylims!(ax,15,52)\n    xlims!(ax,1997,2023)\n    hidespines!.(ax)\n    # pictures\n    aximgs = [Axis(fig[2,i], aspect = 1, xlabel = join(split(names[i]), \"\\n\"),\n        xlabelcolor = blue) for i in 1:9]\n    [image!(aximgs[i], rotr90(pictures[i])) for i in eachindex(pictures)]\n    hidedecorations!.(aximgs; label =false)\n    hidespines!.(aximgs)\n    aximgs[1].xlabelcolor = \"#F79D1EFF\"\n    limits!.(aximgs,1,78,1,78)\n    # connecting lines in fig space!\n    ops = [posFig(ax, mean(years[i]); yoff=250, ylow = 15) for i in 1:8]\n    fps = [posFig(aximgs[i], 39; yoff=120, ylow = 78) for i in 2:9]\n    supls = [supLine(posFig(ax, years[i][begin]; yoff=250, ylow = 15),\n        posFig(ax, years[i][end], yoff=250, ylow = 15)) for i in 1:8]\n    [lines!(fig.scene, supls[k], color = 1.2cmap[k+1]) for k in 1:8]\n    [lines!(fig.scene, BezierPath(ops[k], fps[k], [ops[k][1],ops[k][2]-30],\n        [fps[k][1],fps[k][2]+30]); color = 1.2cmap[k+1]) for k in 1:8]\n    rowsize!(fig.layout,2,Auto(0.2))\n    rowgap!(fig.layout, 60)\n    Legend(fig[1,1], [legleo, leggirl], [\"      Leo's age\", \"      Girlfriend's age\"],\n        halign = :left, valign = :top,tellheight=false,tellwidth=false,\n        margin = (30, 10, 10, 10), framecolor = (:white,0.2))\n    Label(fig[0,:], \"Leo's Syndrome\", color = \"#F79D1EFF\", textsize = 32)\n    fig\n    save(\"leo.png\", fig)\nend\n```\n:::\n\n\n",
    "supporting": [
      "index_files"
    ],
    "filters": [],
    "includes": {}
  }
}
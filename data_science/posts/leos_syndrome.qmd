---
title: "Leo's Syndrome with Julia Makie"
date: "2022-12-16"
categories:
  - julia
  - visualization
  - makie
execute: 
  enabled: false
image: "../images/leo.png"
---


ì´ ê¸€ì€ [Leo's Syndrome](https://beautiful.makie.org/dev/examples/generated/2d/datavis/leos/)ì„ ê¸°ë°˜ìœ¼ë¡œ ì‘ì„±í•˜ì˜€ìŠµë‹ˆë‹¤.

![Leo's Syndrome](leo.png)

ì¬ë¯¸ìˆëŠ” ê¸€ì„ ë°œê²¬í•˜ì—¬ ì†Œê°œí•˜ê³ ì í•©ë‹ˆë‹¤.

ì˜í™”ë°°ìš° ë ˆì˜¤ë‚˜ë¥´ë„ ë””ì¹´í”„ë¦¬ì˜¤ëŠ” ì–´ë¦° ì—¬ì„±ê³¼ ì‚¬ê·€ëŠ” ê²ƒìœ¼ë¡œ ìœ ëª…í•©ë‹ˆë‹¤. ì–´ë–¤ ë¶„ì´ ìœ„ì— ê¸€ê³¼ ê°™ì´ ê¹”ë”í•˜ê²Œ ë°ì´í„° ì‹œê°í™”ë¥¼ í•˜ì˜€ëŠ”ë°ìš”. ì´ëŠ” `Makie`ë¼ê³  í•˜ëŠ” Julia íŒ¨í‚¤ì§€ë¥¼ ì‚¬ìš©í•˜ì˜€ìŠµë‹ˆë‹¤.

`Makie`ëŠ” ë¹„êµì  ìµœê·¼ì— ê°œë°œëœ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì…ë‹ˆë‹¤. ì—¬ëŸ¬ ë°±ì—”ë“œë¥¼ ì‚¬ìš©í•´ì„œ ê°œë°œí•  ìˆ˜ ìˆë‹¤ëŠ” íŠ¹ì§•ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤ë§Œ, ì•„ì§ ì´ˆì°½ê¸°ë‹¤ë³´ë‹ˆ ê¸°ë³¸ì´ ë˜ëŠ” ë°±ì—”ë“œëŠ” `GLMakie`ì´ë©° ì´ì™¸ì— ì—¬ëŸ¬ê°€ì§€ ë‹¤ì–‘í•œ ë°±ì—”ë“œë¡œ ê°œë°œë˜ê³  ìˆìŠµë‹ˆë‹¤.

ê¸°ë³¸ ë¬¸ë²• ë“¤ì„ í•˜ë‚˜ í•˜ë‚˜ ì‚´í´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.

## íŒ¨í‚¤ì§€ ë¶ˆëŸ¬ì˜¤ê¸°

```{julia}
using Downloads, GLMakie
using Colors, Statistics
using FileIO
```

íŒŒì´ì¬ê³¼ ë¹„ìŠ·í•˜ê²Œ ê°€ì¥ ë¨¼ì € ë³¼ ìˆ˜ ìˆëŠ” ê±´ íŒ¨í‚¤ì§€ë¥¼ ë¡œë”©í•˜ëŠ” ë¶€ë¶„ì…ë‹ˆë‹¤.
íŒŒì´ì¬ê³¼ ê°™ì´ `import`ë¥¼ ì‚¬ìš©í•  ìˆ˜ë„ ìˆì§€ë§Œ, ì¤„ë¦¬ì•„ì—ì„œëŠ” `using`ì‚¬ìš©í•˜ëŠ” ê²ƒì´ í‘œì¤€ì´ ë˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.

## ë°±ì—”ë“œ ì„ íƒí•˜ê¸°

```{julia}
GLMakie.activate!()
```

ìœ„ì—ì„œ ë¶ˆëŸ¬ì˜¨ ê·¸ë˜í”½ íŒ¨í‚¤ì§€ì¸ `GLMakie`ë¥¼ í™œì„±í™” ì‹œí‚µë‹ˆë‹¤.

## íŒŒì¼ëª… í•©ì¹˜ê¸°

```{julia}
names = ["Leonardo Dicaprio", "Gisele Bundchen", "Bar Refaeli",
        "Blake Lively", "Erin Heatherton", "Toni Garrn", "Kelly Rohrbach",
        "Nina Agdal", "Camila Morrone"]
namesfiles = join.(split.(lowercase.(names)), "_")
```

ì´ë¦„ì„ ì •í•˜ê³  íŒŒì¼ëª…ì— ë§ì¶œ ìˆ˜ ìˆë„ë¡ ì†Œë¬¸ìë¡œ ë³€í™˜í•˜ê³  ë„ì–´ì“°ê¸°ë¥¼ "_"ë¡œ ì¹˜í™˜í•©ë‹ˆë‹¤.
ì¤„ë¦¬ì•„ëŠ” Broadcastingì„ `.`ì„ í•¨ìˆ˜ ë’¤ì— ë¶™ì´ëŠ” ê²ƒì„ í†µí•´ ë³„ë„ì˜ ì¡°ì¹˜ ì—†ì´ ì ìš©ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤. 
ì˜ˆë¥¼ ë“¤ë©´ `lowercase.(names)`ì˜ ëœ»ì€ `name`ì˜ ê° ì›ì†Œì— `lowercase`í•¨ìˆ˜ë¥¼ ì ìš©í•˜ë¼ëŠ” ê²ƒê³¼ ê°™ìŠµë‹ˆë‹¤.

## ì¶•ì— ë“¤ì–´ê°ˆ ê°’ì„ ìƒì„±í•˜ê¸°

```{julia}
y_xticks = 1998:2022
ys_xticks = string.(1998:2022)
yd_xticks = ["'"*t[3:4] for t in ys_xticks]
age_leo = 24 .+ collect(1:length(y_xticks)) .- 1

age_gf = [18:23, 20:25, 23, 22, 20:21,25, 24:25, 20:25]
years = [1998:2003, 2004:2009, 2010, 2011, 2012:2013, 2014,
    2015:2016, 2017:2022]
```


ê°ì¢… ì¶•ì— ì‚¬ìš©ë  ê°’ì„ ìƒì„±í•©ë‹ˆë‹¤.
ì¤„ë¦¬ì•„ì—ì„œëŠ” `:`ì„ ì‚¬ìš©í•´ì„œ ì—°ì†ëœ ì •ìˆ˜ ê°’ì„ í‘œí˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ì˜ˆë¥¼ ë“¤ë©´ `1998:2022`ëŠ” 1998ë¶€í„° 2022ê¹Œì§€ 1ì”© ì¦ê°€í•˜ëŠ” ê²ƒì„ ì˜ë¯¸í•˜ë©° íŒŒì´ì¬ì—ì„œ `range(1998, 2023)`ê³¼ ë™ì¼ í•©ë‹ˆë‹¤. ì¤„ë¦¬ì•„ëŠ” íŒŒì´ì¬ê³¼ ë‹¤ë¥´ê²Œ ë²”ìœ„ë¥¼ í¬í•¨í•˜ëŠ” íŠ¹ì§•ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤. ì´ëŠ” ìˆ˜í•™ì—ì„œ ì‚¬ìš©í•˜ëŠ” ê²ƒê³¼ ê°€ëŠ¥í•œ ìœ ì‚¬í•œ ë°©ì‹ì„ êµ¬í˜„í•˜ê¸° ìœ„í•¨ìœ¼ë¡œ ì•Œê³  ìˆìŠµë‹ˆë‹¤.

ì´ë¦„ì„ ë°”ê¾¸ì—ˆë˜ ê²ƒê³¼ ê°™ì´ `string` í•¨ìˆ˜ë¥¼ ì ìš©í•´ `ys_xticks`ë¥¼ ìƒì„±í–ˆìŒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë ‡ê²Œ ë°”ê¾¼ ì´ìœ ëŠ” ë’¤ì— ë‘ê¸€ìë§Œ ê°€ì ¸ì™€ `yd_xticks`ë¥¼ ë§Œë“¤ê¸° ìœ„í•¨ ì…ë‹ˆë‹¤.

ì¤„ë¦¬ì•„ì˜ ë˜ë‹¤ë¥¸ íŠ¹ì§•ì„ ì—¬ê¸°ì„œ ë³¼ ìˆ˜ ìˆëŠ”ë° ë¬¸ìì—´ì„ ë³‘í•©í•  ë•Œ `+`ê¸°í˜¸ê°€ ì•„ë‹Œ `*`ê¸°í˜¸ë¥¼ ì”ë‹ˆë‹¤. ì™œ ì´ë ‡ê²Œ ë§Œë“¤ì—ˆëŠ”ì§€ ê¶ê¸ˆí•œ ë¶€ë¶„ì´ê¸´ í•œë° ì´ë¯¸ ë§ì€ ì½”ë“œì— `*`ê°€ ì‚¬ìš©ë˜ê³  ìˆê³  ë°”ê¾¸ëŠ” ì‹¤ìµì´ ê±°ì˜ ì—†ë‹¤ê³  íŒë‹¨í•˜ì—¬ ìœ ì§€ë˜ê³  ìˆë‹¤ê³  ì•Œê³  ìˆìŠµë‹ˆë‹¤.

ê·¸ë‹¤ìŒì—ëŠ” ë ˆì˜¤ì˜ ë‚˜ì´ë¥¼ í‘œê¸°í•˜ê³ ì ìˆ˜ì—´ì„ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.
`24 .+ collect(1:length(y_xticks)) .- 1`ì„ í†µí•´ 24ì‚´ì—ì„œ 1ë¶€í„° ê¸¸ì´ê¹Œì§€ì˜ ìˆ˜ì—´ì„ ë§Œë“¤ê³  1ì„ ë¹¼ì„œ 24ì‚´ ë¶€í„° ë°ì´í„° ìˆ˜ ë§Œí¼ 1ì”© ì¦ê°€í•˜ëŠ” ìˆ˜ì—´ì„ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤. ì—¬ê¸°ì„œ `collect`ë¼ëŠ” í•¨ìˆ˜ëŠ” ë°°ì—´ì„ ë§Œë“œëŠ” í•¨ìˆ˜ë¡œ ë³´ì‹œë©´ ë©ë‹ˆë‹¤.

ë˜í•œ `.+`ëŠ” ê°ê°ì— ë”í•˜ê¸° ì—°ì‚°ì„ í•˜ë¼ëŠ” ì˜ë¯¸ì…ë‹ˆë‹¤.

ì´ ë‹¤ìŒì—ëŠ” ë ˆì˜¤ë‚˜ë¥´ë„ì˜ ì—¬ìì¹œêµ¬ë“¤ì˜ ë‚˜ì´ì™€ ê¸°ê°„ì´ ì í˜€ ìˆìŠµë‹ˆë‹¤.

## ì‚¬ì§„ì„ ë¶ˆëŸ¬ì˜¤ëŠ” í•¨ìˆ˜

```{julia}
function getPicture(; name = "leonardo_dicaprio",
        imgs_link = "https://raw.githubusercontent.com/tashapiro/tanya-data-viz/main/dicaprio-gfs/images/")
    load(Downloads.download(joinpath(imgs_link, name * ".png")))
end
```

ì¤„ë¦¬ì•„ì—ì„œ ì‚¬ì§„ì„ ë¶ˆëŸ¬ì˜¤ëŠ” í•¨ìˆ˜ë¥¼ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤. ì¤„ë¦¬ì•„ëŠ” íŒŒì´ì¬ê³¼ ë‹¤ë¥´ê²Œ `function`ì´ë€ í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ í•¨ìˆ˜ë¥¼ ë§Œë“­ë‹ˆë‹¤. 
ë˜í•œ ê¸°ë³¸ê°’ì´ ìˆëŠ” íŒŒë¼ë¯¸í„°ë¥¼ ì§€ì •í•  ê²½ìš°ì—ëŠ” `;` ë’¤ì— ì´ë¦„ê³¼ íŒŒë¼ë¯¸í„°ë¥¼ ë„£ìœ¼ë©´ ë©ë‹ˆë‹¤. ì´ ë˜í•œ íŒŒì´ì¬ê³¼ ë‹¤ë¥¸ íŠ¹ì§•ì´ë¼ê³  ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì´ í•¨ìˆ˜ëŠ” ë§í¬ ì£¼ì†Œë¥¼ ìƒì„±í•˜ê³  ê·¸ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤.

ì¤„ë¦¬ì•„ì—ì„œ í•¨ìˆ˜ëŠ” `return`ì„ ì§€ì •í•˜ì§€ ì•Šì„ ê²½ìš° ë§ˆì§€ë§‰ ì¤„ì„ ë°˜í™˜í•˜ëŠ” íŠ¹ì§•ì´ ìˆìŠµë‹ˆë‹¤.
ì´ëŠ” í•¨ìˆ˜ê°€ ìƒíƒœë¥¼ ë³€í™”ì‹œí‚¤ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ìˆ˜í•™ì—ì„œ ë§í•˜ëŠ” ê°’ì„ ë°˜í™˜í•˜ëŠ” ê²ƒì„ ê¸°ë³¸ìœ¼ë¡œ í•˜ê³  ìˆë‹¤ê³  ìƒê°í•˜ê¸° ë•Œë¬¸ì— ë„ì…ëœ ë¬¸ë²•ì´ë¼ê³  ìƒê°í•©ë‹ˆë‹¤.

## ë² ì§€ì–´ ê³¡ì„ ì„ ë§Œë“¤ì–´ ì£¼ëŠ” í•¨ìˆ˜

```{julia}
function poly3(t, p0, p1, p2, p3)
    Point2f((1-t)^3 .* p0 .+ t*p1*(3*(1-t)^2) + p2*(3*(1-t)*t^2) .+ p3*t^3)
end
```


```{julia}
function BezierPath(o, f, co, cf; t = range(0,1, length=30))
    return [poly3(t, o, co, cf, f) for t in t]
end
```


ë² ì§€ì–´ ê³¡ì„ ì„ ë§Œë“¤ê¸° ìœ„í•œ í•¨ìˆ˜ì…ë‹ˆë‹¤. `p0, p1, p2, p3` ì ì„ ì§€ë‚˜ëŠ” ë² ì§€ì–´ ê³¡ì„ ì„ ìœ„í•´ì„œ ë§Œë“¤ì–´ì§„ í•¨ìˆ˜ ì…ë‹ˆë‹¤.

ìœ„ì˜ `poly3`ëŠ” 3ì°¨ í•¨ìˆ˜ì´ë©° `range()`í•¨ìˆ˜ë¥¼ í†µí•´ì„œ 30ê°œì˜ í¬ì¸íŠ¸ë¥¼ ë¶€ë“œëŸ½ê²Œ ìƒì„±í•˜ëŠ” í•¨ìˆ˜ ì…ë‹ˆë‹¤.


```{julia}
function posFig(ax, x; yoff=100, ylow = 15)
    o = ax.scene.px_area[].origin - Point2f(0, yoff)
    return Makie.project(ax.scene, Point2f(x, ylow)) + o
end
```

í”¼ê²¨ì˜ ìœ„ì¹˜ë¥¼ ë°˜í™˜ í•©ë‹ˆë‹¤.

```{julia}
function supLine(p1, p2; x=0,y=8)
    [p1 .+ Point2f(x,y), p1, p2, p2 .+ Point2f(x,y)]
end
```

ë””ê¸‹ì„ ì–´ê¸‹ë‚œ ìœ„ì¹˜ë¥¼ ì—°ê²°í•´ì„œ ë³´ì—¬ì¤ë‹ˆë‹¤.

## ìƒ‰ê³¼ ì‚¬ì§„

```{julia}
pictures = [getPicture(; name = n) for n in namesfiles]
cmap = resample_cmap(Reverse(:Hiroshige), 9)
blue = colorant"#6EE2FFFF";
grey = colorant"#D0DFE699";

Î±colors = [blue, blue, (grey, 0.0), (grey,0.0)]
Î±colorsLeg = [blue, (grey, 0.0), (grey,0.0), blue]

```

ìœ„ì—ì„œ ì •ì˜í•œ í•¨ìˆ˜ì™€ ìƒ‰ê°ì„ ì •í•©ë‹ˆë‹¤.
ë¨¼ì € ì‚¬ì§„ì„ ë¶ˆëŸ¬ì™€ ë°°ì—´ì— ë„£ìŠµë‹ˆë‹¤.
ê·¸ë‹¤ìŒìœ¼ë¡œëŠ” ìƒ‰ê¹” ë§µì„ êµ¬í•©ë‹ˆë‹¤.
`resample_cmap`ì´ë€ í•¨ìˆ˜ëŠ” ìƒ‰ ê°„ê²©ì„ ë‚˜ëˆ„ì–´ ì¤ë‹ˆë‹¤.
`Reverse`í•¨ìˆ˜ë¥¼ í†µí•´ì„œ ìƒ‰ì˜ ë°©í–¥ì„ ë°˜ëŒ€ë¡œ ë§Œë“  í›„ 9ê°œì˜ ë‹¨ê³„ë¡œ ìƒ˜í”Œë§ì„ í•˜ê²Œ ë©ë‹ˆë‹¤.
ê·¸í›„ ë‘ ìƒ‰ì„ ë³„ë„ë¡œ ì§€ì •í•©ë‹ˆë‹¤. ê·¸ ì§€ì • ë°©ì‹ì€ ë©”í¬ë¡œë¥¼ í™œìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤.
ì¤„ë¦¬ì•„ì—ì„œëŠ” ë©”í¬ë¡œë¼ëŠ” ì•„ì£¼ ê°•ë ¥í•˜ì§€ë§Œ ìœ„í—˜í•œ ê¸°ëŠ¥ì´ ìˆìŠµë‹ˆë‹¤. `colorant"#6EE2FFFF";`ì€ ë’¤ ë¬¸ìì—´ì„ ìƒ‰ íƒ€ì…ìœ¼ë¡œ ë³€í™˜í•˜ëŠ” ë§¤í¬ë¡œ ì…ë‹ˆë‹¤.
ì—¬ëŸ¬ê°€ì§€ë¥¼ ì†ì‰½ê²Œ ì²˜ë¦¬í•  ìˆ˜ ìˆì–´ ì•„ì£¼ ê°•ë ¥í•˜ì§€ë§Œ, ì˜ëª» ì‚¬ìš©í•˜ë©´ ì½”ë“œ ê°€ë…ì„±ì„ ë§ì´ ë–¨ì–´ëœ¨ë¦¬ê¸°ì— ì¡°ì‹¬í•´ì„œ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.

ê·¸í›„ ì—¬ëŸ¬ ìƒ‰ì˜ ì§‘í•©ì„ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.

## ë²”ì£¼ë¥¼ ìœ„í•œ ë„í˜•

```{julia}
legleo = MarkerElement(color =1.2cmap[2:3:end], marker = :circle, markersize = 20,
        points = Point2f[(0, 0.5), (1, 0.5), (2, 0.5)])
leggirl = PolyElement(color = Î±colorsLeg, strokecolor = :white, strokewidth = 0.85,
    points = Point2f[(-0.2, 0), (2.2, 0), (2.2,1), (-0.2, 1)])
```

ë ˆì˜¤ë‚˜ë¥´ë„ì˜ ë‚˜ì´ë¥¼ í‘œí˜„í•˜ê¸° ìœ„í•œ ì  3ê°œë¥¼ ë§Œë“¤ëŠ” ê²ƒê³¼ ì—¬ìì¹œêµ¬ì˜ ë‚˜ì´ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ì‚¬ê°í˜•ì„ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.

## í…Œë§ˆ ë¸”ë¡ 

```{julia}
with_theme(theme_black()) do
...
end
```

í…Œë§ˆ ë¸”ë¡ì„ í†µí•´ì„œ ì—¬ëŸ¬ê°€ì§€ ê¸°ë³¸ì´ ë˜ëŠ” í…Œë§ˆë¥¼ ì ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## ê·¸ë¦¼ ì‚¬ì´ì¦ˆì™€ ì¶• ì •í•˜ê¸°

```{julia}
    fig = Figure(; resolution = (1200,800))
    ax = Axis(fig[1,1:9], ylabel = "Age [Years]", xlabel = "")
```

## ê·¸ë˜í”„ ê·¸ë¦¬ê¸°

```{julia}
    lines!(ax, y_xticks, age_leo; label = "Leo's age", color = age_leo,
        linestyle = :dot, colormap = 1.2cmap[2:end])
    scatter!(ax, y_xticks, age_leo; label = "Leo's age", color = age_leo,
        markersize = 10, colormap = 1.2cmap[2:end])
```


## ì—¬ìì¹œêµ¬ë“¤ì˜ ë‚˜ì´ ê·¸ë˜í”„ ê·¸ë¦¬ê¸°

```{julia}
    [barplot!.(years[i], age_gf[i]; color = Î±colors,label = "Girlfriend's age",
        strokewidth=0.85, strokecolor= (:white,1)) for i in eachindex(years)]

    [scatter!(ax, [2009,2014, 2016, 2022], fill(25 +1,4);
        color = (blue, 0.1), markersize = 50-3i) for i in 1:10]

    lines!(ax,supLine(Point2f(2009,29), Point2f(2022,29); x=0,y=-3); color=blue)
    lines!(ax,supLine(Point2f(2014,29), Point2f(2016,29); x=0,y=-3); color=blue)

    text!(ax, "Threshold", position = (2014,30))
    [text!(string.(age_gf[i]), position = Point2f.(years[i], age_gf[i] .+0.5),
        align = (:center, :bottom), fontsize = 16) for i in eachindex(age_gf)]
```

ì—¬ìì¹œêµ¬ë“¤ì˜ ë‚˜ì´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë°” ê·¸ë˜í”„ë¥¼ í•˜ë‚˜ì”© ê·¸ë¦¬ë„ë¡ í•©ë‹ˆë‹¤.

ë˜í•œ ì„ê³„ê°’ì— ëŒ€í•´ì„œ ê°•ì¡°í•˜ê¸° ìœ„í•œ ë™ê·¸ë¼ë¯¸ë¥¼ ê·¸ë¦½ë‹ˆë‹¤.

ê±°ê¸°ì— ë§ê²Œ ë””ê·¿ ëª¨ì–‘ì˜ ë³´ì¡°ì„ ì„ ê·¸ë¦½ë‹ˆë‹¤.

ê·¸ë¦¬ê³  í•„ìš”í•œ ê¸€ìë¥¼ ì…ë ¥í•©ë‹ˆë‹¤.

ë˜í•œ ì—°ë„ë„ í‘œì‹œí•˜ë„ë¡ ì…ë ¥í•©ë‹ˆë‹¤.

## ë ˆì˜¤ë‚˜ë¥´ë„ì˜ ë‚˜ì´ ì…ë ¥í•˜ê¸°

```{julia}
    text!(string.(age_leo), position = Point2f.(y_xticks, age_leo .+0.5),
        align = (:center, :bottom), fontsize = 16)
```

ë ˆì˜¤ë‚˜ë¥´ë„ì˜ ë‚˜ì´ ìˆ«ìë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.


## ì¶•ìƒ ìˆ«ì í‘œì‹œ

```{julia}
    ax.xticks = (y_xticks, yd_xticks)
    ax.yticks = 0:5:55
    ylims!(ax,15,52)
    xlims!(ax,1997,2023)
    hidespines!.(ax)
```

ê° ì¶•ì˜ ë‹¨ìœ„ë¥¼ í‘œì‹œí•˜ëŠ” í‹±ì„ ì§€ì •í•©ë‹ˆë‹¤.

ê·¸í›„ ì„ê³„ê°’ì„ ì§€ì •í•©ë‹ˆë‹¤.

ë§ˆì§€ë§‰ìœ¼ë¡œ ìŠ¤íŒŒì¸ì„ ìˆ¨ê¹ë‹ˆë‹¤.

## ì‚¬ì§„ ë°°ì¹˜

```{julia}
    # pictures
    aximgs = [Axis(fig[2,i], aspect = 1, xlabel = join(split(names[i]), "\n"),
        xlabelcolor = blue) for i in 1:9]
    [image!(aximgs[i], rotr90(pictures[i])) for i in eachindex(pictures)]
    hidedecorations!.(aximgs; label =false)
    hidespines!.(aximgs)
    aximgs[1].xlabelcolor = "#F79D1EFF"
    limits!.(aximgs,1,78,1,78)
```


ì‚¬ì§„ì„ ë°°ì¹˜í•˜ê¸° ì „ ì´ë¦„ì„ ì¤„ë°”ê¿ˆìœ¼ë¡œ ë§Œë“¤ì–´ ë‘¡ë‹ˆë‹¤.

ê·¸ ë‹¤ìŒ ê·¸ë¦¼ì„ ë¶™ì—¬ ë„£ìŠµë‹ˆë‹¤. 90ë„ë¥¼ íšŒì „ ì‹œí‚¤ëŠ” ì´ìœ ëŠ” ê·¸ë¦¼ì˜ í”½ì…€ ë°°ì¹˜ê°€ 90 ì°¨ì´ê°€ ë‚˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. 

ê·¸ ë‹¤ìŒ ê·¸ë¦¼ í‘œì‹œí•´ì£¼ëŠ” ê²ƒì„ ìƒëµí•˜ì‹œê³ , ê·¸ë¦¼ì„ ê·¸ë¦½ë‹ˆë‹¤.
ë§ˆì§€ë§‰ìœ¼ë¡œ ì²«ë²ˆì§¸ ê·¸ë¦¼ì˜ ìƒ‰ì— ë§ê²Œ ê¸€ì ìƒ‰ì„ ë³€ê²½í•˜ê³  ê·¸ë¦¼ í¬ê¸°ë¥¼ ì§€ì •í•©ë‹ˆë‹¤.

## ê³¡ì„ ìœ¼ë¡œ ì—°ê²°í•˜ê¸°

```{julia}
# connecting lines in fig space!
    ops = [posFig(ax, mean(years[i]); yoff=250, ylow = 15) for i in 1:8]
    fps = [posFig(aximgs[i], 39; yoff=120, ylow = 78) for i in 2:9]
    supls = [supLine(posFig(ax, years[i][begin]; yoff=250, ylow = 15),
        posFig(ax, years[i][end], yoff=250, ylow = 15)) for i in 1:8]
    [lines!(fig.scene, supls[k], color = 1.2cmap[k+1]) for k in 1:8]
    [lines!(fig.scene, BezierPath(ops[k], fps[k], [ops[k][1],ops[k][2]-30],
        [fps[k][1],fps[k][2]+30]); color = 1.2cmap[k+1]) for k in 1:8]
```

ì‹œì‘ì§€ì ê³¼ ëì§€ì ì˜ ìœ„ì¹˜ë¥¼ ì§€ì •í•©ë‹ˆë‹¤. `supls`ë¥¼ í†µí•´ ìœ„ì¹˜ë¥¼ ì§€ì •í•˜ê³  í•´ë‹¹ ì ì„ ì—°ê²°í•˜ì—¬ ë””ê·¿ ëª¨ì–‘ì˜ ë¶€ë¶„ì„ ë¨¼ì € ìƒì„±í•©ë‹ˆë‹¤. 
ê·¸ í›„ ê°€ìš´ë° ë¶€ë¶„ì— í•´ë‹¹í•˜ëŠ” ìœ„ì¹˜ì— ë§ë„ë¡ ë² ì§€ì–´ ê³¡ì„ ì„ í†µí•´ ë¶€ë“œëŸ½ê²Œ ì—°ê²°í•©ë‹ˆë‹¤.

## ì œëª©ê³¼ ë§ˆë¬´ë¦¬

```{julia}
    rowsize!(fig.layout,2,Auto(0.2))
    rowgap!(fig.layout, 60)
    Legend(fig[1,1], [legleo, leggirl], ["      Leo's age", "      Girlfriend's age"],
        halign = :left, valign = :top,tellheight=false,tellwidth=false,
        margin = (30, 10, 10, 10), framecolor = (:white,0.2))
    Label(fig[0,:], "Leo's Syndrome", color = "#F79D1EFF", textsize = 32)
```

ë ˆì´ì•„ì›ƒì„ ì¡°ì •í•˜ê³  ê°„ê²©ì„ ì¡°ì •í•©ë‹ˆë‹¤.
ì´ì „ì— ìƒì„±í•´ ë‘” ëª¨ì–‘ì„ ê°€ì§€ê³  ë²”ë¡€ë¥¼ ë§Œë“­ë‹ˆë‹¤.

ê·¸ í›„ ë ˆì´ë¸”ì„ í™œìš©í•´ ì œëª©ì„ ë§Œë“­ë‹ˆë‹¤.

## ë§ˆë¬´ë¦¬ 

ì´ ëª¨ë“  ê³¼ì •ì„ ë‹¤ ëª¨ì•„ì„œ ì•„ë˜ì™€ ê°™ì´ ì‘ì„±í•˜ë©´ ìœ„ì—ì„œ ë³´ì•˜ë˜ ì´ë¯¸ì§€ë¥¼ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì´ ëª¨ë“  ê³¼ì •ì„ í†µí•´ ìš°ë¦¬ëŠ” `Makie`ë¥¼ í†µí•´ ì–´ë–»ê²Œ ê·¸ë¦¼ì„ ê·¸ë¦´ ìˆ˜ ìˆëŠ”ì§€ ì•Œ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.

ìë™ìœ¼ë¡œ ìœ„ì¹˜ë¥¼ ì¡ì•„ì£¼ê³  ì—°ê²°í•´ì£¼ëŠ” ë“±ì˜ í¸ì˜ ê¸°ëŠ¥ì€ ë¶€ì¡±í•˜ê¸°ì— ì‹¤ë¬´ì—ì„œ íš¨ê³¼ì ì¼ì§€ì— ëŒ€í•´ì„œëŠ” ì¢€ ë” ì•Œì•„ë³´ì•„ì•¼ í•  ê²ƒ ê°™ìŠµë‹ˆë‹¤.

```{julia}
using Downloads, GLMakie
using Colors, Statistics
using FileIO

GLMakie.activate!()
# some data
names = ["Leonardo Dicaprio", "Gisele Bundchen", "Bar Refaeli",
        "Blake Lively", "Erin Heatherton", "Toni Garrn", "Kelly Rohrbach",
        "Nina Agdal", "Camila Morrone"]
namesfiles = join.(split.(lowercase.(names)), "_")

y_xticks = 1998:2022
ys_xticks = string.(1998:2022)
yd_xticks = ["'"*t[3:4] for t in ys_xticks]
age_leo = 24 .+ collect(1:length(y_xticks)) .- 1

age_gf = [18:23, 20:25, 23, 22, 20:21,25, 24:25, 20:25]
years = [1998:2003, 2004:2009, 2010, 2011, 2012:2013, 2014,
    2015:2016, 2017:2022]
# helper functions
# Inspired by https://github.com/tashapiro/tanya-data-viz/tree/main/dicaprio-gfs
function getPicture(; name = "leonardo_dicaprio",
        imgs_link = "https://raw.githubusercontent.com/tashapiro/tanya-data-viz/main/dicaprio-gfs/images/")
    load(Downloads.download(joinpath(imgs_link, name * ".png")))
end
function poly3(t, p0, p1, p2, p3)
    Point2f((1-t)^3 .* p0 .+ t*p1*(3*(1-t)^2) + p2*(3*(1-t)*t^2) .+ p3*t^3)
end
function BezierPath(o, f, co, cf; t = range(0,1, length=30))
    return [poly3(t, o, co, cf, f) for t in t]
end
function posFig(ax, x; yoff=100, ylow = 15)
    o = ax.scene.px_area[].origin - Point2f(0, yoff)
    return Makie.project(ax.scene, Point2f(x, ylow)) + o
end
function supLine(p1, p2; x=0,y=8)
    [p1 .+ Point2f(x,y), p1, p2, p2 .+ Point2f(x,y)]
end

pictures = [getPicture(; name = n) for n in namesfiles]
cmap = resample_cmap(Reverse(:Hiroshige), 9)
blue = colorant"#6EE2FFFF";
grey = colorant"#D0DFE699";
# Î±colors = [blue, grey, (grey, 0.1), (blue,0.65)] # try this one ğŸ˜„
Î±colors = [blue, blue, (grey, 0.0), (grey,0.0)]
Î±colorsLeg = [blue, (grey, 0.0), (grey,0.0), blue]

legleo = MarkerElement(color =1.2cmap[2:3:end], marker = :circle, markersize = 20,
        points = Point2f[(0, 0.5), (1, 0.5), (2, 0.5)])
leggirl = PolyElement(color = Î±colorsLeg, strokecolor = :white, strokewidth = 0.85,
    points = Point2f[(-0.2, 0), (2.2, 0), (2.2,1), (-0.2, 1)])

with_theme(theme_black()) do
    fig = Figure(; resolution = (1200,800))
    ax = Axis(fig[1,1:9], ylabel = "Age [Years]", xlabel = "")
    lines!(ax, y_xticks, age_leo; label = "Leo's age", color = age_leo,
        linestyle = :dot, colormap = 1.2cmap[2:end])
    scatter!(ax, y_xticks, age_leo; label = "Leo's age", color = age_leo,
        markersize = 10, colormap = 1.2cmap[2:end])
    [barplot!.(years[i], age_gf[i]; color = Î±colors,label = "Girlfriend's age",
        strokewidth=0.85, strokecolor= (:white,1)) for i in eachindex(years)]
    [scatter!(ax, [2009,2014, 2016, 2022], fill(25 +1,4);
        color = (blue, 0.1), markersize = 50-3i) for i in 1:10]
    lines!(ax,supLine(Point2f(2009,29), Point2f(2022,29); x=0,y=-3); color=blue)
    lines!(ax,supLine(Point2f(2014,29), Point2f(2016,29); x=0,y=-3); color=blue)
    text!(ax, "Threshold", position = (2014,30))
    [text!(string.(age_gf[i]), position = Point2f.(years[i], age_gf[i] .+0.5),
        align = (:center, :bottom), fontsize = 16) for i in eachindex(age_gf)]
    text!(string.(age_leo), position = Point2f.(y_xticks, age_leo .+0.5),
        align = (:center, :bottom), fontsize = 16)
    ax.xticks = (y_xticks, yd_xticks)
    ax.yticks = 0:5:55
    ylims!(ax,15,52)
    xlims!(ax,1997,2023)
    hidespines!.(ax)
    # pictures
    aximgs = [Axis(fig[2,i], aspect = 1, xlabel = join(split(names[i]), "\n"),
        xlabelcolor = blue) for i in 1:9]
    [image!(aximgs[i], rotr90(pictures[i])) for i in eachindex(pictures)]
    hidedecorations!.(aximgs; label =false)
    hidespines!.(aximgs)
    aximgs[1].xlabelcolor = "#F79D1EFF"
    limits!.(aximgs,1,78,1,78)
    # connecting lines in fig space!
    ops = [posFig(ax, mean(years[i]); yoff=250, ylow = 15) for i in 1:8]
    fps = [posFig(aximgs[i], 39; yoff=120, ylow = 78) for i in 2:9]
    supls = [supLine(posFig(ax, years[i][begin]; yoff=250, ylow = 15),
        posFig(ax, years[i][end], yoff=250, ylow = 15)) for i in 1:8]
    [lines!(fig.scene, supls[k], color = 1.2cmap[k+1]) for k in 1:8]
    [lines!(fig.scene, BezierPath(ops[k], fps[k], [ops[k][1],ops[k][2]-30],
        [fps[k][1],fps[k][2]+30]); color = 1.2cmap[k+1]) for k in 1:8]
    rowsize!(fig.layout,2,Auto(0.2))
    rowgap!(fig.layout, 60)
    Legend(fig[1,1], [legleo, leggirl], ["      Leo's age", "      Girlfriend's age"],
        halign = :left, valign = :top,tellheight=false,tellwidth=false,
        margin = (30, 10, 10, 10), framecolor = (:white,0.2))
    Label(fig[0,:], "Leo's Syndrome", color = "#F79D1EFF", textsize = 32)
    fig
    save("leo.png", fig)
end
```
